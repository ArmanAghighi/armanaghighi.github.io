<div id="unity-container" class="unity-desktop">
  <canvas id="unity-canvas" width="960" height="600" tabindex="-1"></canvas>

  <div id="unity-loading-bar">
    <div id="unity-logo"></div>

    <div id="unity-progress-bar-empty">
      <div id="unity-progress-bar-full"></div>
    </div>

    <div id="loading-text">LOADING 0%</div>
  </div>

  <div id="unity-warning"></div>
</div>

<script>
  var canvas = document.querySelector("#unity-canvas");
  var loadingBar = document.querySelector("#unity-loading-bar");
  var progressBar = document.querySelector("#unity-progress-bar-full");
  var loadingText = document.querySelector("#loading-text");

  var buildUrl = "Build";
  var loaderUrl = buildUrl + "/SpaceShooter.loader.js";

  var config = {
    dataUrl: buildUrl + "/SpaceShooter.data",
    frameworkUrl: buildUrl + "/SpaceShooter.framework.js",
    codeUrl: buildUrl + "/SpaceShooter.wasm",
    streamingAssetsUrl: "StreamingAssets",
    companyName: "AKAS",
    productName: "Space Shooter",
    productVersion: "1.0",
  };

  loadingBar.style.display = "flex";

  var script = document.createElement("script");
  script.src = loaderUrl;

  script.onload = () => {
    createUnityInstance(canvas, config, (progress) => {
      var percent = Math.floor(progress * 100);
      progressBar.style.width = percent + "%";
      loadingText.innerText = "LOADING " + percent + "%";
    }).then(() => {
      loadingBar.style.display = "none";
    }).catch((message) => {
      alert(message);
    });
  };

  document.body.appendChild(script);
</script>

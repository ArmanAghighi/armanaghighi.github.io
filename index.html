<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Arman Aghighi — Portfolio (Game Intro)</title>
<meta name="description" content="Arman Aghighi — Unity & AR Developer. Game-style intro and interactive menu." />
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect fill=%22%2300f0ff%22 width=%22100%22 height=%22100%22 rx=%2220%22/></svg>">
<style>
  :root{
    --bg:#05030a; --card:#0d0c12; --accent:#7afcff; --accent2:#9b5cff; --muted:#9aa0a6;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:linear-gradient(180deg,#04020a 0%, #071026 60%);font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Arial;color:#eaf6ff;overflow:hidden}
  #bgCanvas{position:fixed;inset:0;z-index:0}
  /* Intro full-screen */
  .intro{
    position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:60;flex-direction:column;background:radial-gradient(800px 600px at 50% 20%, rgba(122,252,255,0.03), transparent), rgba(2,2,6,0.6);
    backdrop-filter: blur(1px);
  }
  .ps1-logo{
    color:var(--accent);font-weight:900;letter-spacing:3px;font-size:56px;text-shadow: 0 6px 28px rgba(122,252,255,0.08), 0 0 14px rgba(155,92,255,0.06);
    transform:translateY(0);opacity:1;
  }
  .ps1-sub{font-family: "Roboto Mono", monospace;color:rgba(180,240,255,0.85);margin-top:10px;font-size:13px;opacity:0.9}
  .scanline{position:absolute;inset:0;pointer-events:none;background-image:linear-gradient(rgba(255,255,255,0.02) 1px, transparent 1px); background-size:100% 4px;mix-blend-mode:overlay;opacity:0.6}
  .crt-noise{position:absolute;inset:0;pointer-events:none;background-repeat:repeat;opacity:0.04;mix-blend-mode:screen;filter:contrast(120%) saturate(110%)}
  /* Game menu container */
  .wrap{position:relative;z-index:2;min-height:100vh;display:grid;place-items:center;padding:36px}
  .card{width:100%;max-width:1100px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:14px;padding:22px;display:grid;grid-template-columns:320px 1fr;gap:20px;backdrop-filter: blur(8px) saturate(120%);border:1px solid rgba(255,255,255,0.03);box-shadow:0 20px 60px rgba(0,0,0,0.7)}
  .profile{padding:14px;border-radius:10px;background:linear-gradient(180deg, rgba(138,92,255,0.03), rgba(122,252,255,0.01));display:flex;flex-direction:column;align-items:center;gap:12px}
  .avatar{width:150px;height:150px;border-radius:50%;background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;font-weight:800;font-size:40px;color:#05060b;border:3px solid rgba(255,255,255,0.04)}
  .name h1{margin:0;font-size:22px}
  .type{font-family: "Roboto Mono", monospace;color:var(--accent);font-size:13px;margin-top:6px}
  .bio{color:var(--muted);text-align:center;font-size:13px;padding:0 6px}
  .skills{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin-top:6px}
  .skill{font-size:13px;padding:8px 10px;border-radius:8px;background:rgba(255,255,255,0.015);border:1px solid rgba(255,255,255,0.02)}
  /* Menu column */
  .menu-wrap{padding:6px}
  .menu-title{display:flex;align-items:center;justify-content:space-between}
  h2{margin:0;font-size:18px}
  .menu{margin-top:18px;display:flex;flex-direction:column;gap:10px}
  .menu-item{
    padding:14px 18px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));border:1px solid rgba(255,255,255,0.02);
    display:flex;align-items:center;justify-content:space-between;cursor:pointer;transition:transform 0.12s ease, box-shadow 0.12s ease;
  }
  .menu-item:hover,.menu-item.active{transform:translateX(6px);box-shadow:0 20px 40px rgba(0,0,0,0.6), 0 0 18px rgba(122,252,255,0.04)}
  .menu-item .label{font-weight:700}
  .menu-item .hint{color:var(--muted);font-size:13px}
  .small-row{display:flex;gap:10px;align-items:center;margin-top:16px;flex-wrap:wrap}
  .btn{padding:10px 14px;border-radius:8px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03);text-decoration:none;color:#dff; font-weight:700}
  footer{color:var(--muted);font-size:13px;margin-top:18px;text-align:right}
  .neon{color:var(--accent)}
  /* tiny cinematic top bar */
  .topbar{position:fixed;left:0;right:0;top:10px;display:flex;justify-content:center;z-index:80;pointer-events:none}
  .topbar span{background:linear-gradient(90deg, rgba(122,252,255,0.06), rgba(138,92,255,0.06));padding:6px 14px;border-radius:20px;font-size:12px;color:rgba(255,255,255,0.6)}
  /* responsive */
  @media (max-width:900px){
    .card{grid-template-columns:1fr;padding:14px}
    .avatar{width:120px;height:120px;font-size:34px}
  }
  /* subtle focus styles */
  .menu-item:focus{outline:2px solid rgba(122,252,255,0.08);outline-offset:4px}
</style>
</head>
<body>
<!-- particle canvas -->
<canvas id="bgCanvas"></canvas>

<!-- cinematic topbar -->
<div class="topbar"><span>PRESS ↑ / ↓  •  ENTER to select</span></div>

<!-- Intro (PS1-style) -->
<div class="intro" id="intro">
  <div style="position:relative;text-align:center">
    <div class="ps1-logo" id="psLogo">ARMAN</div>
    <div class="ps1-sub">Presents</div>
    <div style="height:28px"></div>
    <div style="opacity:0.9;color:rgba(200,255,255,0.06);font-family:monospace;font-size:12px">© 1997 — retro-game-portfolio</div>
  </div>
  <div style="height:36px"></div>
  <div style="font-size:12px;color:rgba(200,255,255,0.35);letter-spacing:1px">Booting...</div>
  <div class="scanline" aria-hidden="true"></div>
  <canvas class="crt-noise" id="crt" width="512" height="256"></canvas>
</div>

<!-- Main UI -->
<div class="wrap" id="main" aria-hidden="true" style="display:none">
  <main class="card" id="card">
    <aside class="profile">
      <div class="avatar" id="avatar">AA</div>
      <div class="name"><h1>Arman Aghighi</h1><div class="type">Unity & AR Developer</div></div>
      <p class="bio">I craft immersive experiences with Unity & AR — building interactive worlds, gameplay systems and shaders.</p>

      <div class="skills" aria-hidden="true">
        <div class="skill">Unity</div><div class="skill">C#</div><div class="skill">AR Foundation</div><div class="skill">Shaders</div><div class="skill">Optimization</div>
      </div>

      <div class="small-row" style="margin-top:12px">
        <a class="btn" href="https://github.com/armanaghighi" target="_blank" rel="noopener">GitHub</a>
        <a class="btn" href="resume.pdf" download>Download Resume</a>
      </div>
    </aside>

    <section class="menu-wrap">
      <div class="menu-title"><div><div class="neon" style="font-size:13px">GAME PORTFOLIO</div><h2>MAIN MENU</h2></div></div>
      <div class="menu" id="menu">
        <div class="menu-item" data-action="start" tabindex="0"><div class="label">Start Portfolio</div><div class="hint">Enter</div></div>
        <div class="menu-item" data-action="skills" tabindex="0"><div class="label">Skills</div><div class="hint">View badges</div></div>
        <div class="menu-item" data-action="projects" tabindex="0"><div class="label">Projects</div><div class="hint">Show selected work</div></div>
        <div class="menu-item" data-action="resume" tabindex="0"><div class="label">Resume</div><div class="hint">Download PDF</div></div>
        <div class="menu-item" data-action="exit" tabindex="0"><div class="label">Exit</div><div class="hint">Close (no-op)</div></div>
      </div>

      <div class="small-row" style="margin-top:18px">
        <div class="btn" id="open-github">Open GitHub</div>
        <div class="btn" id="contact-me">Contact</div>
      </div>

      <footer>© <span id="year"></span> Arman Aghighi — Press Start</footer>
    </section>
  </main>
</div>

<script>
/* ---------------------------
   Particle Background (fast)
   --------------------------- */
const canvas = document.getElementById('bgCanvas');
const ctx = canvas.getContext('2d');
let W = canvas.width = innerWidth, H = canvas.height = innerHeight;
const particles = [];
const PCOUNT = Math.max(40, Math.floor((W*H)/100000));
function rand(min,max){return Math.random()*(max-min)+min}
for(let i=0;i<PCOUNT;i++) particles.push({x:rand(0,W),y:rand(0,H),r:rand(0.7,2.8),vx:rand(-0.25,0.5),vy:rand(-0.15,0.35),h:rand(180,300)});

function resize(){W=canvas.width=innerWidth;H=canvas.height=innerHeight}
window.addEventListener('resize',resize);

function drawBG(){
  ctx.clearRect(0,0,W,H);
  // subtle gradient
  const g = ctx.createLinearGradient(0,0,W,H);
  g.addColorStop(0,'rgba(5,3,10,0.2)'); g.addColorStop(1,'rgba(2,4,16,0.4)');
  ctx.fillStyle=g; ctx.fillRect(0,0,W,H);
  // particles
  for(let p of particles){
    p.x+=p.vx; p.y+=p.vy;
    if(p.x>W+20)p.x=-20; if(p.x<-20)p.x=W+20;
    if(p.y>H+20)p.y=-20; if(p.y<-20)p.y=H+20;
    // glow
    const rad = p.r*7;
    const grad = ctx.createRadialGradient(p.x,p.y,1,p.x,p.y,rad);
    grad.addColorStop(0,`hsla(${p.h},90%,65%,0.11)`);
    grad.addColorStop(1,'rgba(0,0,0,0)');
    ctx.fillStyle=grad; ctx.beginPath(); ctx.arc(p.x,p.y,rad,0,Math.PI*2); ctx.fill();
    ctx.fillStyle = `hsla(${p.h},90%,65%,0.95)`; ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fill();
  }
  requestAnimationFrame(drawBG);
}
drawBG();

/* ---------------------------
   CRT Noise for Intro
   --------------------------- */
const crt = document.getElementById('crt');
const cctx = crt.getContext('2d');
function crtLoop(){
  const w = crt.width, h = crt.height;
  cctx.clearRect(0,0,w,h);
  const id = cctx.createImageData(w,h);
  for(let i=0;i<id.data.length;i+=4){
    const v = (Math.random()*40)|0;
    id.data[i]=v; id.data[i+1]=v; id.data[i+2]=v; id.data[i+3]=20;
  }
  cctx.putImageData(id,0,0);
  requestAnimationFrame(crtLoop);
}
crtLoop();

/* ---------------------------
   WebAudio: PS1-like startup synth
   (procedural; no external audio)
   --------------------------- */
const AudioCtx = window.AudioContext || window.webkitAudioContext;
const audioCtx = new AudioCtx();
function playPS1Startup(){
  const t0 = audioCtx.currentTime;
  // create a stacked synth: 3 oscillators + lowpass + reverb-ish delay
  const master = audioCtx.createGain(); master.gain.value = 0.9; master.connect(audioCtx.destination);
  const bp = audioCtx.createBiquadFilter(); bp.type='lowpass'; bp.frequency.value = 8000; bp.Q.value=0.6; bp.connect(master);

  const delay = audioCtx.createDelay(); delay.delayTime.value = 0.08;
  const fb = audioCtx.createGain(); fb.gain.value = 0.22; delay.connect(fb); fb.connect(delay); delay.connect(bp);

  // short bell-ish harmonic
  const freqs = [220, 330, 440];
  for(let i=0;i<3;i++){
    const o = audioCtx.createOscillator();
    o.type = i===0? 'sawtooth': (i===1? 'triangle':'sine');
    o.frequency.value = freqs[i]* (i===2? 1.01 : 1);
    const g = audioCtx.createGain(); g.gain.value = 0.0;
    o.connect(g); g.connect(delay);
    // envelope
    g.gain.setValueAtTime(0.0001, t0);
    g.gain.exponentialRampToValueAtTime(0.7/(i+1), t0 + 0.03 + i*0.02);
    g.gain.exponentialRampToValueAtTime(0.001, t0 + 2.0 + i*0.05);
    o.start(t0);
    o.stop(t0 + 2.2);
  }

  // low growl
  const o2 = audioCtx.createOscillator(); o2.type='sine'; o2.frequency.value=70;
  const g2 = audioCtx.createGain(); g2.gain.value=0.0;
  o2.connect(g2); g2.connect(bp);
  g2.gain.setValueAtTime(0.0001,t0); g2.gain.exponentialRampToValueAtTime(0.4,t0+0.12); g2.gain.exponentialRampToValueAtTime(0.0001,t0+2.4);
  o2.start(t0); o2.stop(t0+2.6);

  // final bright click
  const click = audioCtx.createOscillator(); click.type='square'; click.frequency.value=1200;
  const cg = audioCtx.createGain(); cg.gain.value=0.0001;
  click.connect(cg); cg.connect(bp);
  cg.gain.setValueAtTime(0.0001,t0+1.6); cg.gain.exponentialRampToValueAtTime(0.8,t0+1.62); cg.gain.exponentialRampToValueAtTime(0.0001,t0+2.0);
  click.start(t0+1.6); click.stop(t0+2.1);
}

/* Hover & select blips (short) */
function blip(type='hover'){
  const t = audioCtx.currentTime;
  const o = audioCtx.createOscillator();
  const g = audioCtx.createGain();
  o.connect(g); g.connect(audioCtx.destination);
  if(type==='hover'){ o.type='triangle'; o.frequency.setValueAtTime(520, t); g.gain.setValueAtTime(0.0001,t); g.gain.linearRampToValueAtTime(0.08,t+0.001); g.gain.exponentialRampToValueAtTime(0.0001,t+0.12); o.start(t); o.stop(t+0.13) }
  else { o.type='sawtooth'; o.frequency.setValueAtTime(320, t); g.gain.setValueAtTime(0.0001,t); g.gain.linearRampToValueAtTime(0.22,t+0.001); g.gain.exponentialRampToValueAtTime(0.0001,t+0.26); o.start(t); o.stop(t+0.28) }
}

/* ---------------------------
   Intro -> Menu flow
   --------------------------- */
const intro = document.getElementById('intro');
const main = document.getElementById('main');
const psLogo = document.getElementById('psLogo');

function showMenu(){
  // hide intro, show main
  intro.style.transition = 'opacity 0.8s ease'; intro.style.opacity = 0; setTimeout(()=>{ intro.style.display='none'; main.style.display='grid'; main.setAttribute('aria-hidden','false'); document.getElementById('menu').querySelectorAll('.menu-item')[0].classList.add('active'); initMenu(); }, 850);
}

// animate PS1-like logo sequence
function playIntroSequence(){
  // ensure audio context resumed on user gesture (some browsers require)
  if(audioCtx.state==='suspended'){ audioCtx.resume().catch(()=>{}); }
  // small logo scale/pulse + sound
  psLogo.style.transform='scale(0.9) translateY(-6px)'; psLogo.style.opacity='0.0';
  setTimeout(()=>{ psLogo.style.transition='transform 0.45s cubic-bezier(.2,.9,.2,1), opacity 0.45s'; psLogo.style.transform='scale(1.18)'; psLogo.style.opacity='1'; playPS1Startup(); }, 120);
  // slight flicker / show CRT noise stronger
  setTimeout(()=>{ document.getElementById('crt').style.opacity=0.45 }, 140);
  // hold, then zoom out and go to menu
  setTimeout(()=>{ psLogo.style.transition='transform 0.8s ease, opacity 0.6s'; psLogo.style.transform='scale(0.28) translateY(-120px)'; psLogo.style.opacity='0.9'; document.getElementById('intro').style.background='linear-gradient(180deg, rgba(0,0,0,0.6), rgba(2,2,6,0.4))' }, 1600);
  setTimeout(()=>{ showMenu(); }, 2700);
}

/* Wait for first user gesture to start intro audio if required.
   We'll also start automatically (most modern browsers allow short auto play if user interacted previously).
*/
function startOnTap(){
  // single click or key
  function once(){ document.removeEventListener('pointerdown',once); document.removeEventListener('keydown',once); playIntroSequence() }
  document.addEventListener('pointerdown', once, {passive:true}); document.addEventListener('keydown', once, {passive:true});
  // Also schedule an automatic attempt (in case browser allows)
  setTimeout(()=>{ if(intro.style.display !== 'none') playIntroSequence(); }, 400);
}
startOnTap();

/* ---------------------------
   Menu interactions
   --------------------------- */
let menuIndex = 0;
const menuItems = Array.from(document.querySelectorAll('.menu-item'));
function setActive(i){
  menuItems.forEach((it,idx)=>{ it.classList.toggle('active', idx===i); if(idx===i) it.focus(); });
}
function initMenu(){
  setActive(menuIndex);
  // hover handlers -> play blip
  menuItems.forEach((it,idx)=>{
    it.addEventListener('mouseenter', ()=>{ menuIndex = idx; setActive(menuIndex); blip('hover'); });
    it.addEventListener('click', ()=>{ blip('select'); activate(menuItems[idx].dataset.action); });
  });
  // keyboard nav
  document.addEventListener('keydown', (e)=>{
    if(main.style.display === 'none') return;
    if(e.key === 'ArrowDown'){ menuIndex = (menuIndex+1) % menuItems.length; setActive(menuIndex); blip('hover'); e.preventDefault(); }
    else if(e.key === 'ArrowUp'){ menuIndex = (menuIndex-1 + menuItems.length) % menuItems.length; setActive(menuIndex); blip('hover'); e.preventDefault(); }
    else if(e.key === 'Enter'){ blip('select'); activate(menuItems[menuIndex].dataset.action); }
  });
  // small buttons
  document.getElementById('open-github').addEventListener('click', ()=>{ blip('select'); window.open('https://github.com/armanaghighi','_blank') });
  document.getElementById('contact-me').addEventListener('click', ()=>{ blip('select'); window.location.href='mailto:arman@example.com' });
}

/* Actions */
function activate(action){
  if(action==='start'){ // show portfolio: smooth scroll to profile or open overlay
    // for demo: simple modal-like reveal of projects by focusing content
    openSection('projects');
  } else if(action==='skills'){ openSection('skills'); }
  else if(action==='projects'){ openSection('projects'); }
  else if(action==='resume'){ window.open('resume.pdf','_blank'); }
  else if(action==='exit'){ // visual effect
    const card = document.getElementById('card'); card.style.transition='transform 0.5s ease, opacity 0.6s'; card.style.transform='translateY(20px) scale(0.98)'; card.style.opacity='0'; setTimeout(()=>{ card.style.transform='none'; card.style.opacity='1' }, 700);
  }
}

/* Simple overlay behavior - show content in same page (scroll down simulation) */
function openSection(name){
  // quick animated highlight on the right panel: flash border
  const panel = document.querySelector('.menu-wrap');
  panel.style.transition='box-shadow 0.32s ease, border 0.32s ease';
  panel.style.boxShadow='0 40px 80px rgba(138,92,255,0.08)';
  setTimeout(()=>{ panel.style.boxShadow='none' }, 700);

  // quick toast with details (temp)
  const toast = document.createElement('div');
  toast.style.position='fixed'; toast.style.left='50%'; toast.style.transform='translateX(-50%)'; toast.style.bottom='60px';
  toast.style.background='linear-gradient(90deg, rgba(122,252,255,0.06), rgba(138,92,255,0.06))'; toast.style.padding='12px 18px'; toast.style.borderRadius='10px';
  toast.style.boxShadow='0 12px 30px rgba(0,0,0,0.6)'; toast.style.color='#ddf'; toast.style.fontWeight='700';
  toast.textContent = (name==='skills'?'Showing skills...': (name==='projects'?'Opening selected projects...':'Starting portfolio...'));
  document.body.appendChild(toast);
  setTimeout(()=>{ toast.style.transition='opacity 0.4s ease'; toast.style.opacity='0'; setTimeout(()=>toast.remove(),420) }, 1400);

  // simple open behavior: if projects, open github link after delay
  if(name==='projects'){ setTimeout(()=>{ window.open('https://github.com/armanaghighi','_blank'); }, 900) }
}

/* finalize */
document.getElementById('year').textContent = new Date().getFullYear();

/* Avatar auto-replace if profile.jpg present in repo root */
(function tryLoadAvatar(){
  const img = new Image();
  img.onload = ()=>{ const av = document.getElementById('avatar'); av.textContent=''; av.style.background='transparent'; av.appendChild(img); img.style.width='100%'; img.style.height='100%'; img.style.objectFit='cover'; img.style.borderRadius='50%'; }
  img.onerror = ()=>{};
  img.src = 'profile.jpg';
})();

</script>
</body>
</html>

<div id="unity-container" class="unity-desktop">
  <canvas id="unity-canvas" width="960" height="600" tabindex="-1"></canvas>

  <div id="unity-loading">
    <img id="loading-image" src="TemplateData/AKAS.png" />

    <div id="loading-percent">0%</div>

    <div id="loading-bar-bg">
      <div id="loading-bar-fill"></div>
    </div>
  </div>
</div>

<script>
  const canvas = document.querySelector("#unity-canvas");
  const loading = document.querySelector("#unity-loading");
  const barFill = document.querySelector("#loading-bar-fill");
  const percentText = document.querySelector("#loading-percent");

  const buildUrl = "Build";
  const loaderUrl = buildUrl + "/SpaceShooter.loader.js";

  const config = {
    dataUrl: buildUrl + "/SpaceShooter.data",
    frameworkUrl: buildUrl + "/SpaceShooter.framework.js",
    codeUrl: buildUrl + "/SpaceShooter.wasm",
    streamingAssetsUrl: "StreamingAssets",
    companyName: "AKAS",
    productName: "Space Shooter",
    productVersion: "1.0",
  };

  const script = document.createElement("script");
  script.src = loaderUrl;

  script.onload = () => {
    createUnityInstance(canvas, config, (progress) => {
      const p = Math.floor(progress * 100);
      barFill.style.width = p + "%";
      percentText.innerText = p + "%";
    }).then(() => {
      loading.style.display = "none";
    });
  };

  document.body.appendChild(script);
</script>
